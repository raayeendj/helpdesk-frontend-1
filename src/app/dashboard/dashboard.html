

<div class="dashboard-wrapper">
  
  <!-- Contenu principal -->
  <section class="main-content">
    <div class="content-header">
      <h1>All tickets</h1>
      <button class="filter-btn">+ Add filter</button>
    </div>

    <p class="ticket-count">{{ tickets.length }} tickets</p>

    <table class="ticket-table" *ngIf="tickets.length > 0; else noTickets">
      <thead>
        <tr>
          <th>Requester</th>
          <th>Subject</th>
          <th>Agent</th>
          <th>Status</th>
          <th>Last message</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ticket of tickets">
          <td class="requester">
            <div class="avatar">
              {{ ticket.requesterName.charAt(0) | uppercase }}
            </div>
            <div class="email">{{ ticket.requesterEmail }}</div>
          </td>
          <td class="subject">{{ ticket.subject }}</td>
          <td>{{ ticket.assignee || 'Unassigned' }}</td>
          <td>
            <span
              class="status-label"
              [ngClass]="{
                'status-open': ticket.status?.toLowerCase() === 'open',
                'status-closed': ticket.status?.toLowerCase() === 'closed',
                'status-pending': ticket.status?.toLowerCase() === 'pending'
              }"
            >
              {{ ticket.status }}
            </span>
          </td>
          <td>{{ ticket.message | slice: 0:40 }}...</td>
        </tr>
      </tbody>
    </table>

    <ng-template #noTickets>
      <p>No tickets found. Create a new one!</p>
    </ng-template>
  </section>
</div>